import{c as u,j as e,r as m,R as ue,a as fe,b as q}from"./index-YbM0DRD2.js";import{d as $,e as w,j as z,u as B,h as k,P as _,f as U,i as me,c as L}from"./index-D4raj1WU.js";function xe(o){const n=o+"CollectionProvider",[t,r]=$(n),[a,s]=t(n,{collectionRef:{current:null},itemMap:new Map}),c=h=>{const{scope:f,children:v}=h,l=u.useRef(null),C=u.useRef(new Map).current;return e.jsx(a,{scope:f,itemMap:C,collectionRef:l,children:v})};c.displayName=n;const d=o+"CollectionSlot",i=z(d),p=u.forwardRef((h,f)=>{const{scope:v,children:l}=h,C=s(d,v),b=w(f,C.collectionRef);return e.jsx(i,{ref:b,children:l})});p.displayName=d;const x=o+"CollectionItemSlot",g="data-radix-collection-item",y=z(x),j=u.forwardRef((h,f)=>{const{scope:v,children:l,...C}=h,b=u.useRef(null),N=w(f,b),I=s(x,v);return u.useEffect(()=>(I.itemMap.set(b,{ref:b,...C}),()=>{I.itemMap.delete(b)})),e.jsx(y,{[g]:"",ref:N,children:l})});j.displayName=x;function R(h){const f=s(o+"CollectionConsumer",h);return u.useCallback(()=>{const l=f.collectionRef.current;if(!l)return[];const C=Array.from(l.querySelectorAll(`[${g}]`));return Array.from(f.itemMap.values()).sort((I,M)=>C.indexOf(I.ref.current)-C.indexOf(M.ref.current))},[f.collectionRef,f.itemMap])}return[{Provider:c,Slot:p,ItemSlot:j},R,r]}var he=ue[" useId ".trim().toString()]||(()=>{}),Ce=0;function Y(o){const[n,t]=m.useState(he());return B(()=>{t(r=>r??String(Ce++))},[o]),n?`radix-${n}`:""}var E="Collapsible",[ge,J]=$(E),[ve,V]=ge(E),Q=m.forwardRef((o,n)=>{const{__scopeCollapsible:t,open:r,defaultOpen:a,disabled:s,onOpenChange:c,...d}=o,[i,p]=k({prop:r,defaultProp:a??!1,onChange:c,caller:E});return e.jsx(ve,{scope:t,disabled:s,contentId:Y(),open:i,onOpenToggle:m.useCallback(()=>p(x=>!x),[p]),children:e.jsx(_.div,{"data-state":F(i),"data-disabled":s?"":void 0,...d,ref:n})})});Q.displayName=E;var W="CollapsibleTrigger",X=m.forwardRef((o,n)=>{const{__scopeCollapsible:t,...r}=o,a=V(W,t);return e.jsx(_.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":F(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...r,ref:n,onClick:U(o.onClick,a.onOpenToggle)})});X.displayName=W;var H="CollapsibleContent",ee=m.forwardRef((o,n)=>{const{forceMount:t,...r}=o,a=V(H,o.__scopeCollapsible);return e.jsx(me,{present:t||a.open,children:({present:s})=>e.jsx(be,{...r,ref:n,present:s})})});ee.displayName=H;var be=m.forwardRef((o,n)=>{const{__scopeCollapsible:t,present:r,children:a,...s}=o,c=V(H,t),[d,i]=m.useState(r),p=m.useRef(null),x=w(n,p),g=m.useRef(0),y=g.current,j=m.useRef(0),R=j.current,h=c.open||d,f=m.useRef(h),v=m.useRef(void 0);return m.useEffect(()=>{const l=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(l)},[]),B(()=>{const l=p.current;if(l){v.current=v.current||{transitionDuration:l.style.transitionDuration,animationName:l.style.animationName},l.style.transitionDuration="0s",l.style.animationName="none";const C=l.getBoundingClientRect();g.current=C.height,j.current=C.width,f.current||(l.style.transitionDuration=v.current.transitionDuration,l.style.animationName=v.current.animationName),i(r)}},[c.open,r]),e.jsx(_.div,{"data-state":F(c.open),"data-disabled":c.disabled?"":void 0,id:c.contentId,hidden:!h,...s,ref:x,style:{"--radix-collapsible-content-height":y?`${y}px`:void 0,"--radix-collapsible-content-width":R?`${R}px`:void 0,...o.style},children:h&&a})});function F(o){return o?"open":"closed"}var Ae=Q,je=X,ye=ee,Ie=m.createContext(void 0);function Re(o){const n=m.useContext(Ie);return o||n||"ltr"}var A="Accordion",Ne=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[G,_e,we]=xe(A),[S]=$(A,[we,J]),K=J(),oe=u.forwardRef((o,n)=>{const{type:t,...r}=o,a=r,s=r;return e.jsx(G.Provider,{scope:o.__scopeAccordion,children:t==="multiple"?e.jsx(Te,{...s,ref:n}):e.jsx(Se,{...a,ref:n})})});oe.displayName=A;var[te,Pe]=S(A),[ne,Ee]=S(A,{collapsible:!1}),Se=u.forwardRef((o,n)=>{const{value:t,defaultValue:r,onValueChange:a=()=>{},collapsible:s=!1,...c}=o,[d,i]=k({prop:t,defaultProp:r??"",onChange:a,caller:A});return e.jsx(te,{scope:o.__scopeAccordion,value:u.useMemo(()=>d?[d]:[],[d]),onItemOpen:i,onItemClose:u.useCallback(()=>s&&i(""),[s,i]),children:e.jsx(ne,{scope:o.__scopeAccordion,collapsible:s,children:e.jsx(re,{...c,ref:n})})})}),Te=u.forwardRef((o,n)=>{const{value:t,defaultValue:r,onValueChange:a=()=>{},...s}=o,[c,d]=k({prop:t,defaultProp:r??[],onChange:a,caller:A}),i=u.useCallback(x=>d((g=[])=>[...g,x]),[d]),p=u.useCallback(x=>d((g=[])=>g.filter(y=>y!==x)),[d]);return e.jsx(te,{scope:o.__scopeAccordion,value:c,onItemOpen:i,onItemClose:p,children:e.jsx(ne,{scope:o.__scopeAccordion,collapsible:!0,children:e.jsx(re,{...s,ref:n})})})}),[Me,T]=S(A),re=u.forwardRef((o,n)=>{const{__scopeAccordion:t,disabled:r,dir:a,orientation:s="vertical",...c}=o,d=u.useRef(null),i=w(d,n),p=_e(t),g=Re(a)==="ltr",y=U(o.onKeyDown,j=>{if(!Ne.includes(j.key))return;const R=j.target,h=p().filter(O=>!O.ref.current?.disabled),f=h.findIndex(O=>O.ref.current===R),v=h.length;if(f===-1)return;j.preventDefault();let l=f;const C=0,b=v-1,N=()=>{l=f+1,l>b&&(l=C)},I=()=>{l=f-1,l<C&&(l=b)};switch(j.key){case"Home":l=C;break;case"End":l=b;break;case"ArrowRight":s==="horizontal"&&(g?N():I());break;case"ArrowDown":s==="vertical"&&N();break;case"ArrowLeft":s==="horizontal"&&(g?I():N());break;case"ArrowUp":s==="vertical"&&I();break}const M=l%v;h[M].ref.current?.focus()});return e.jsx(Me,{scope:t,disabled:r,direction:a,orientation:s,children:e.jsx(G.Slot,{scope:t,children:e.jsx(_.div,{...c,"data-orientation":s,ref:i,onKeyDown:r?void 0:y})})})}),P="AccordionItem",[Oe,Z]=S(P),se=u.forwardRef((o,n)=>{const{__scopeAccordion:t,value:r,...a}=o,s=T(P,t),c=Pe(P,t),d=K(t),i=Y(),p=r&&c.value.includes(r)||!1,x=s.disabled||o.disabled;return e.jsx(Oe,{scope:t,open:p,disabled:x,triggerId:i,children:e.jsx(Ae,{"data-orientation":s.orientation,"data-state":pe(p),...d,...a,ref:n,disabled:x,open:p,onOpenChange:g=>{g?c.onItemOpen(r):c.onItemClose(r)}})})});se.displayName=P;var ae="AccordionHeader",ce=u.forwardRef((o,n)=>{const{__scopeAccordion:t,...r}=o,a=T(A,t),s=Z(ae,t);return e.jsx(_.h3,{"data-orientation":a.orientation,"data-state":pe(s.open),"data-disabled":s.disabled?"":void 0,...r,ref:n})});ce.displayName=ae;var D="AccordionTrigger",ie=u.forwardRef((o,n)=>{const{__scopeAccordion:t,...r}=o,a=T(A,t),s=Z(D,t),c=Ee(D,t),d=K(t);return e.jsx(G.ItemSlot,{scope:t,children:e.jsx(je,{"aria-disabled":s.open&&!c.collapsible||void 0,"data-orientation":a.orientation,id:s.triggerId,...d,...r,ref:n})})});ie.displayName=D;var le="AccordionContent",de=u.forwardRef((o,n)=>{const{__scopeAccordion:t,...r}=o,a=T(A,t),s=Z(le,t),c=K(t);return e.jsx(ye,{role:"region","aria-labelledby":s.triggerId,"data-orientation":a.orientation,...c,...r,ref:n,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...o.style}})});de.displayName=le;function pe(o){return o?"open":"closed"}var De=oe,$e=se,ke=ce,Le=ie,Ve=de;function He({...o}){return e.jsx(De,{"data-slot":"accordion",...o})}function Fe({className:o,...n}){return e.jsx($e,{"data-slot":"accordion-item",className:L("border-b last:border-b-0",o),...n})}function Ge({className:o,children:n,...t}){return e.jsx(ke,{className:"flex",children:e.jsxs(Le,{"data-slot":"accordion-trigger",className:L("group flex flex-1 items-start gap-2 text-left font-medium transition-all outline-none disabled:pointer-events-none disabled:opacity-50 cursor-pointer [&[data-state=open]>.plus]:hidden [&[data-state=open]>.minus]:inline",o),...t,children:[e.jsx("span",{className:"plus inline mr-1 2xl:mr-2",children:"[+]"}),e.jsx("span",{className:"minus hidden mr-1 2xl:mr-2",children:"[-]"}),e.jsx("span",{className:"underline-offset-6 2xl:underline-offset-8 decoration-dashed group-focus-visible:underline group-hover:underline",children:n})]})})}function Ke({className:o,children:n,...t}){return e.jsx(Ve,{"data-slot":"accordion-content",className:"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden",...t,children:e.jsx("div",{className:L("pt-0",o),children:n})})}function Ze(o,n){const t=n.today.length>0?n.today[0]:null;t?document.title=`${o.year}年${t.name}`:document.title=`${o.year}年${o.month}月${o.day}日 ${o.weekdayZh}`}function Be(){const{canonical:o,yesterday:n,tomorrow:t,solar:r,lunar:a,solarTerm:s,observances:c,onThisDayEvents:d}=fe();return m.useEffect(()=>{Ze(r,c)},[r,c]),e.jsxs("div",{children:[e.jsxs("p",{children:[r.year,"年 ",r.monthNameZh]}),e.jsxs("p",{children:[r.monthNameEn," ",r.day]}),e.jsxs("p",{children:[r.weekdayZh," | ",r.weekdayEn]}),e.jsx("hr",{}),e.jsxs("p",{children:["农历",a.year,"年 ",a.month,a.day]}),e.jsxs("p",{children:[a.season,"之时 · ",s.name,s.threePhenology," · ",s.phenologyDay]}),c.today.length>0||c.upcoming.length>0?e.jsxs(e.Fragment,{children:[e.jsx("hr",{}),c.today.map(i=>e.jsxs("p",{children:["- ",e.jsx("span",{className:i.nameClass,children:i.name}),i.message?e.jsx("span",{className:`ml-2 ${i.messageClass}`,children:i.message}):null]},i.name)),c.upcoming.map(({observance:i,daysUntil:p})=>e.jsxs("p",{children:["- 距离",i,"还有 ",p," 天"]},i))]}):null,d.length>0?e.jsxs(e.Fragment,{children:[e.jsx("hr",{}),e.jsx(He,{type:"single",collapsible:!0,children:e.jsxs(Fe,{value:"on-this-day",children:[e.jsx(Ge,{children:"历史上的今天"}),e.jsx(Ke,{children:d.map((i,p)=>e.jsxs("p",{children:[i.year,"年 - ",i.description]},`${i.year}-${p}`))})]})})]}):null,e.jsx("p",{children:" "}),e.jsxs("p",{className:"flex justify-between",children:[e.jsx(q,{to:`/${n}`,className:"font-semibold",children:e.jsx("span",{children:"<-"})}),e.jsx("span",{children:o}),e.jsx(q,{to:`/${t}`,className:"font-semibold",children:e.jsx("span",{children:"->"})})]})]})}export{Be as default};

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Redirecting...</title>
  <script>
    // GitHub Pages SPA redirect workaround
    // When GitHub Pages serves a 404, this script redirects to the index
    // with the path encoded in the URL, which index.html will then restore
    (function(){
      var path = window.location.pathname;
      
      // Only redirect if we're not already at the root
      if (path !== '/' && path !== '/index.html') {
        // Remove leading slash
        var redirect = path.slice(1);
        
        // Properly encode all URL components to prevent XSS
        var encodedPath = encodeURIComponent(redirect);
        var encodedSearch = encodeURIComponent(window.location.search);
        var encodedHash = encodeURIComponent(window.location.hash);
        
        // Construct safe redirect URL
        var redirectParam = encodedPath;
        if (encodedSearch) redirectParam += encodedSearch;
        if (encodedHash) redirectParam += encodedHash;
        
        // Redirect to root with the path as a parameter
        window.location.replace(
          window.location.origin + '/?spa-redirect=' + redirectParam
        );
      }
    })();
  </script>
</head>
<body>
  <p>Redirecting...</p>
</body>
</html>
